<p>duel-board works!</p>
<div class="game-board" *ngIf="duel && !duel.gameFinished">
  <h2>Duel: {{ duel.id }}</h2>
  <h3>Players: {{ duel.playerA.name }} vs {{ duel.playerB.name }}</h3>
  <h4>Round: {{ duel.playerTurn }}</h4>
  <div *ngIf="!duelService.sacrificing" class="opponent-table">
    <h4>{{ duel.playerA.name }}'s Table HP: {{ duel.playerA.hp }}</h4>
    <input *ngIf="isAttacking()" type="checkbox" [checked]="duelService.targetCard === undefined" (change)="duelService.setTargetCard(undefined)">
    <h2 *ngIf="isAttacking()">Select your enemy!</h2>

    <div *ngFor="let card of duel.playerA.table">
      <app-card [card]=card></app-card>
      <input *ngIf="isCurrentPlayer() && isAttacking()" type="checkbox" [checked]="duelService.targetCard?.id === card.id" (change)="duelService.setTargetCard(card)">
    </div>
    <button *ngIf="isCurrentPlayer() && isAttacking()" (click)="attack()">Attack Now!!</button>
  </div>
  <div *ngIf="!isAttacking()" class="player-table">
    <h4>{{ duel.playerB.name }}'s Table HP: {{ duel.playerB.hp }}</h4>
    <div *ngFor="let card of duel.playerB.table">
      <app-card [card]=card></app-card>
      <input *ngIf="canSacrifice()" type="checkbox" [checked]="duelService.sacrificingCardsId.includes(card.id)" (change)="duelService.toggleSacrificeCard(card.id, $event)">
      <button *ngIf="canAttack(card)" (click)="setAttacker(card)">Prepare For Attack</button>
    </div>
    <button *ngIf="canSacrifice()" (click)="sacrificeCard()">Sacrifice!!</button>
    <button *ngIf="canToggleSacrifice()" (click)="toggleSacrifice()">Toggle Sacrifice</button>

    <h4>{{ duel.playerB.name }}'s Hand</h4>
    <div class="player-hand" *ngFor="let card of duel.playerB.hand">
        <app-card [card]=card></app-card>
        <button *ngIf="canSummon() && card.rarity === 'COMMON'" (click)="summonCard(card.id)">Summon</button>
    </div>
    <button *ngIf="duel.playerTurn == 0 && isCurrentPlayer()" (click)="endTurn()">Start Game</button>
    <button *ngIf="duel.playerTurn != 0 && !duel.gameFinished && isCurrentPlayer()" (click)="endTurn()">End Turn</button>
  </div>
</div>
<div *ngIf="duel && duel.gameFinished">
  <h2>Duel: {{ duel.id }}</h2>
  <h3>Players: {{ duel.playerA.name }} vs {{ duel.playerB.name }}</h3>
  <h1 *ngIf="duel.winnerId == duel.playerA.id"> You LOSE! </h1>
  <h1 *ngIf="duel.winnerId == duel.playerB.id"> You WIN! </h1>
  <button (click)="exitGame()">Exit Game</button>
</div>

<div *ngIf="!duel">
  <p>No duel found</p>
  <button (click)="goToHomepage()">Back to Homepage</button>
